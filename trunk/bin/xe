#!/bin/bash

#export XEPATH=$HOME/bin/
instanceCount=$(ps aux | grep `whoami` | grep xemacs | grep -v 'grep xemacs' | wc -l);
if [ "$instanceCount" -eq "0" ]; then

  opts=$(echo $* | grep geo)
  if [ "$opts" != "" ]; then
    xemacs $opts &
  else  
    xemacs -geo 206x56+0+0 $* &
  fi

  instanceCount="";
  
  while [ "$instanceCount" = "" ]; do
    instanceCount=$(ps aux | grep `whoami` | grep gnuserv | grep -v 'grep gnuserv' | wc -l);
    echo "waiting for gnuserv";
    sleep 1;
  done;

  sleep 1;

else
  
  gnuclient -q $* &

fi




